# Host Discovery

**Name**: Jan Freitag   
**Klasse**: 4AHITS   
**Fach**: ITSE   
**Datum**: 13.10.2025   
**Anweisungen**: siehe Teams

## Übungen

### Ping

#### Ping-Test (von MacOS)

##### Default Gateway

```shell
ping -c 4 192.168.68.1 
PING 192.168.68.1 (192.168.68.1): 56 data bytes
64 bytes from 192.168.68.1: icmp_seq=0 ttl=64 time=3.589 ms
64 bytes from 192.168.68.1: icmp_seq=1 ttl=64 time=3.715 ms
64 bytes from 192.168.68.1: icmp_seq=2 ttl=64 time=7.960 ms
64 bytes from 192.168.68.1: icmp_seq=3 ttl=64 time=4.586 ms

--- 192.168.68.1 ping statistics ---
4 packets transmitted, 4 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 3.589/4.963/7.960/1.773 ms
```



##### Kali

```shell
187hahaxd@MacBook ~ % ping -c 4 192.168.68.54
PING 192.168.68.54 (192.168.68.54): 56 data bytes
64 bytes from 192.168.68.54: icmp_seq=0 ttl=64 time=0.684 ms
64 bytes from 192.168.68.54: icmp_seq=1 ttl=64 time=0.631 ms
64 bytes from 192.168.68.54: icmp_seq=2 ttl=64 time=0.637 ms
64 bytes from 192.168.68.54: icmp_seq=3 ttl=64 time=0.604 ms

--- 192.168.68.54 ping statistics ---
4 packets transmitted, 4 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 0.604/0.639/0.684/0.029 ms
```

##### Metasploitable

```shell
187hahaxd@MacBook ~ % ping -c 4 192.168.68.62
PING 192.168.68.62 (192.168.68.62): 56 data bytes
64 bytes from 192.168.68.62: icmp_seq=0 ttl=64 time=0.401 ms
64 bytes from 192.168.68.62: icmp_seq=1 ttl=64 time=0.381 ms
64 bytes from 192.168.68.62: icmp_seq=2 ttl=64 time=0.360 ms
64 bytes from 192.168.68.62: icmp_seq=3 ttl=64 time=0.350 ms

--- 192.168.68.62 ping statistics ---
4 packets transmitted, 4 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 0.350/0.373/0.401/0.020 ms
```

#### Ping Cheat-Sheet

1. `-c` Anzahl von gesendeten Paketen   

2. `-i` Sekunden zwischen zwei Paketen  
   Standart ist 1s

3. `-s` (Linux/macOS) / `-l`  (Windows)  
    Größe der Nutzdaten in Bytes

4. -W [s] (Linux) / -w [ms] (Windows)  
    Zeit bis es als timeout zählt

5. `-t` (Linux) / `-i` (Windows)  
    Wert von TTL (time to live)

6. `-I` (Linux)  
    Interface wählen

7. `-4` / `-6`  
    Erzwingt IPv4 / IPv6

8. `-f` (Linux, root) — flood ping   
    Extremst schnelles senden 

9. `-n` (Linux) / `-a` (Windows)  
    `-n` unterdrück DNS (zeigt IP)  
    `-a` zeigt Hostname

10. `-q` (Linux)  
    nur Entwertung 

#### Protokoll

Ping benutzt das ICMP Protokoll. Dadurch kann eine Firewall das auf Netzwerkebene blockieren

```bash
#!/bin/bash
# Code generated by DeepSeek AI

fping -agq "${1%.*}.1" "${1%.*}.254" 2>/dev/null
```

`-a` (alive) ... nur erreichbare Hosts
`-g` (generate) ... generiert IP-Adressen
`-q` (quiet) ... nur Endergebnis

`${1}` ... Erstes Script-Argument
`%.*` ... Entfernt alles ab dem letzten Punkt
`.1` ... Fügt ".1" hinzu

`2>/dev/null` ... Unterdrückt Fehlermeldungen (leitet sie ins Nichts)

##### Ausgabe

```shell
187hahaxd@MacBook ~ % chmod +x test.sh         
187hahaxd@MacBook ~ % ./test.sh 192.168.68.0/24
192.168.68.1
192.168.68.50
192.168.68.53
192.168.68.52
192.168.68.54
192.168.68.62
192.168.68.58
192.168.68.55
```

#### Übung (Alternativen)

1. `arp -a`
2. `ip neigh show`
3. `nc -z -w 1 <ip> <port>`   
   `-z` ... scan only  
   `-w 1` ... 1s timeout
4. `nslookup <ip>`
5. `traceroute -m 2 -w 1 <ip>`  
   `-m 2` ... 2 hops  
   `-w 1 ` ... 1s timeout
6. `ssh-keyscan -T 1 <ip>`
   `-T 1` ... 1s timeout

#### Übung (Firewall)

| Verteidiger      | Angreifer                |
| ---------------- | ------------------------ |
| ICMP ausschalten | TCP-Scans                |
| Firewall Regeln  | ARP-Scans                |
| Rate Limiting    | Source Port Manipulation |

